version: '3.7'

services:
  spark-iceberg:
    image: spark-iceberg
    container_name: spark-iceberg
    volumes:
      - ./test:/test
    ports:
      - 8888:8888
      - 8080:8080
      - 10000:10000
      - 10001:10001

  # source: https://github.com/developer-advocacy-dremio/iceberg-intro-lessons/blob/main/docker-compose.yml
  nessie:
    image: projectnessie/nessie:0.67.0
    container_name: nessie
    ports:
      - 19120:19120

  minio:
    image: minio/minio:RELEASE.2023-07-21T21-12-44Z
    container_name: minio
    env_file:
      - secrets.env
    ports:
      - 9001:9001
      - 9000:9000
    command: ["server", "/data", "--console-address", ":9001"]

  dremio:
    platform: linux/x86_64
    container_name: dremio
    image: dremio/dremio-oss:latest
    ports:
      - 9047:9047
      - 31010:31010
      - 32010:32010
